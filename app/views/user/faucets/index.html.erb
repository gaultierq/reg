<div class="uk-section uk-section-default" onload="onload()">
  <div class="uk-container">
    <%= render 'shared/notice' %>

    <div class="uk-flex-middle uk-margin-medium" uk-grid>
      <div class="uk-width-expand@m">
        <h1 class="uk-heading-primary">Faucets</h1>
      </div>
      <div class="uk-width-auto@m">
        <button id="nfc" class="uk-button uk-button-primary">NFC Scan</button>
      </div>
    </div>

    <%= form_tag(user_faucets_path, method: :get) do %>
    <div class="uk-grid-small" uk-grid>
      <div class="uk-width-expand">
        <%= text_field_tag :rfid_number, '', class: 'uk-input' %>
      </div>
      <div>
        <%= submit_tag 'Show', class: 'uk-button uk-button-default' %>
      </div>
    </div>
    <% end %>
  </div>
</div>

<script>
    document.getElementById("nfc").onclick = function () {
        console.log("Send post message");

        window.postMessage("Post message from web", "*");
    };

    let showInput = document.querySelector("input");
    document.addEventListener("message", function(event) {
        console.log("Received post message", event);
        showInput.value = event.data;
        }, false);
</script>